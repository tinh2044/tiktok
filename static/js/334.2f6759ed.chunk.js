"use strict";(self.webpackChunktiktok=self.webpackChunktiktok||[]).push([[334,247],{3334:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i=t(4165),s=t(2982),a=t(5861),o=t(885),c=t(9448),r=t.n(c),l={following:"Following_following__NIB90",wrapper:"Following_wrapper__HDqeY",item:"Following_item__w5EnX",video:"Following_video__jm1I4",desc:"Following_desc__vWPok",avatar:"Following_avatar__0gQ3P",name:"Following_name__RoepR",nickname:"Following_nickname__UzApm",tick:"Following_tick__yUPHe",btn:"Following_btn__u9OB5"},u=t(2791),d=t(1313),m=t(1087),_=t(5839),v=t(9625),h=t(4483),x=t(1632),p=t(3395),f=t(5263),j=t(184),g=r().bind(l);var w=function(e){var n=e.data,t=(n.user,(0,u.useContext)(f.u).show),i=(0,u.useContext)(p.i).volume,s=(0,u.useRef)();return(0,j.jsx)(m.rU,{to:"/following",children:(0,j.jsxs)("div",{className:g("item"),onMouseMove:function(){s&&s.current.play()},onMouseOut:function(){s&&s.current.pause()},children:[(0,j.jsx)("video",{className:g("video"),src:n.popular_video.file_url,onTimeUpdate:function(e){e.target.volume=i},ref:s}),(0,j.jsxs)("div",{className:g("desc"),children:[(0,j.jsx)(_.Z,{src:n.avatar,className:g("avatar"),size:"48px"}),(0,j.jsx)("h5",{className:g("name"),children:n.first_name+n.last_name}),(0,j.jsxs)("h6",{className:g("nickname"),children:[n.nickname,n.tick&&(0,j.jsx)("span",{className:g("tick"),children:(0,j.jsx)(h.G,{className:g("icon"),icon:x.LEp})})]}),(0,j.jsx)(v.Z,{primary:!0,className:g("btn"),onClick:t,children:"Follow"})]})]})})},b=t(9559),N=t(4247),Z=r().bind(l);var k=function(){var e=(0,u.useState)([]),n=(0,o.Z)(e,2),t=n[0],c=n[1],r=(0,u.useState)(1),l=(0,o.Z)(r,2),m=l[0],_=l[1],v=(0,u.useRef)(),h=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:"for-you",window.removeEventListener("scroll",x),e.next=4,(0,b.D)(m);case 4:n=e.sent,console.log(n),c((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(n))})),window.addEventListener("scroll",x);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){return h("for-you"),window.addEventListener("scroll",x),window.removeEventListener("scroll",x)}),[m]);var x=function(){var e=v.current.scrollHeight;e>0&&document.documentElement.scrollTop>e-900&&_(m+1)},p=(0,u.useContext)(d.m).isLogin;return(0,j.jsx)("div",{ref:v,className:Z("following"),children:p?(0,j.jsx)(u.Fragment,{children:(0,j.jsx)(N.default,{})}):(0,j.jsx)("div",{className:Z("wrapper"),children:t.map((function(e,n){return(0,j.jsx)(w,{data:e},n)}))})})}},4247:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var i=t(4165),s=t(2982),a=t(5861),o=t(885),c=t(9448),r=t.n(c),l=t(1413),u=t(1632),d=t(1187),m=t(4483),_=t(1087),v=t(2791),h=t(8858),x=(t(4992),t(5839)),p=t(9625),f=t(1519),j=t(5768),g=t(1663),w=t(3395),b=t(4307),N=t(184),Z=r().bind({wrapper:"Share_wrapper__jtU6i",item:"Share_item__qERxI",icon:"Share_icon__VLEix",title:"Share_title__PRrOA",btn:"Share_btn__ccnmr"});var k=function(e){var n=e.data,t=(0,v.useState)(n.slice(0,4)),i=(0,o.Z)(t,2),s=i[0],a=i[1],c=(0,v.useState)(!1),r=(0,o.Z)(c,2),l=r[0],d=r[1];return(0,N.jsxs)("div",{className:Z("wrapper"),children:[s.map((function(e,n){return(0,N.jsxs)(_.rU,{className:Z("item"),children:[(0,N.jsx)("div",{style:{backgroundColor:e.bgc},className:Z("icon"),children:e.icon}),(0,N.jsx)("p",{className:Z("title"),children:e.title})]},n)})),l?(0,N.jsx)("button",{className:Z("btn"),onClick:function(){d(!1),a(n.slice(0,4))},children:(0,N.jsx)(m.G,{icon:u.mTx})}):(0,N.jsx)("button",{className:Z("btn"),onClick:function(){d(!0),a(n)},children:(0,N.jsx)(m.G,{icon:u.ptq})})]})},I=t(5263),y=t(1313),V=r().bind({wrapper:"VideoItem_wrapper__SalTZ",header:"VideoItem_header__SUBWJ",desc:"VideoItem_desc__7bhcs",avatar:"VideoItem_avatar__9o5RU",content:"VideoItem_content__+hHVp",info:"VideoItem_info__7ZeOn",nickname:"VideoItem_nickname__jf8g7",icon:"VideoItem_icon__v9sA5",name:"VideoItem_name__9XAqA",text:"VideoItem_text__ruIx3",hashtag:"VideoItem_hashtag__Oloms",music:"VideoItem_music__N-ghC","icon-music":"VideoItem_icon-music__9eSql",main:"VideoItem_main__Ou-lo","place-video":"VideoItem_place-video__2aHot",video:"VideoItem_video__Y9-WQ",action:"VideoItem_action__Yd427","play-or-pause":"VideoItem_play-or-pause__lRTuS",volume:"VideoItem_volume__RQjU0","volume-bar":"VideoItem_volume-bar__orlnG","vol-icon":"VideoItem_vol-icon__Z7PqU","place-interactive":"VideoItem_place-interactive__QGMbe",heart:"VideoItem_heart__DH5m-",comment:"VideoItem_comment__sf8C9",share:"VideoItem_share__2FPy7",quantity:"VideoItem_quantity__79aIW"}),S=[{icon:(0,N.jsx)(m.G,{icon:u.dT$}),title:"Embed",bgc:"#161823"},{icon:(0,N.jsx)(m.G,{icon:u.M6U}),title:"Send to friends",bgc:"rgb(254, 44, 85)"},{icon:(0,N.jsx)(m.G,{icon:d.AYu}),title:"Share to facebook",bgc:"#20d5ec"},{icon:(0,N.jsx)(m.G,{icon:d.VHX}),title:"Share to whatsApp",bgc:"rgb(37, 211, 102)"},{icon:(0,N.jsx)(m.G,{icon:u.nNP}),title:"Copy link",bgc:"rgb(254, 44, 85)"},{icon:(0,N.jsx)(m.G,{icon:d.mdU}),title:"Share to twitter",bgc:"rgb(29, 161, 242)"},{icon:(0,N.jsx)(m.G,{icon:d.hwn}),title:"Share to linked",bgc:"rgb(10, 102, 194)"},{icon:(0,N.jsx)(m.G,{icon:d.Uv8}),title:"Share to Telegram",bgc:"rgb(29, 161, 242)"},{icon:(0,N.jsx)(m.G,{icon:u.FU$}),title:"Share to whatsApp",bgc:"rgb(29, 161, 242)"}];var G=function(e){var n=e.data,t=n.user,i=(0,v.useContext)(b.s),s=i.playVideo,a=i.setPlayVideo,c=(0,v.useContext)(w.i),r=c.volume,d=c.setVolume,Z=(0,v.useRef)(null),G=(0,v.useState)(!1),C=(0,o.Z)(G,2),E=C[0],U=C[1],F=(0,v.useContext)(I.u).show,L=(0,v.useContext)(y.m).isLogin,T=(0,v.useState)(""),q=(0,o.Z)(T,2),R=q[0],P=q[1],A=(0,v.useState)([]),H=(0,o.Z)(A,2),O=H[0],M=H[1];(0,v.useLayoutEffect)((function(){!function(){var e=n.description;e.includes("#")?(M(e.split("#").slice(1)),P(e.substring(0,e.indexOf("#")))):P(e)}()}),[]),(0,v.useMemo)((function(){s&&null!==Z.current&&(s===n.id?Z.current.play():(U(!1),Z.current.pause(),Z.current.currentTime=0))}),[s]);var Q=function(){return E?Z.current.pause():(a(n.id),Z.current.play()),U(!E)};return(0,N.jsxs)("div",{className:V("wrapper"),children:[(0,N.jsxs)("header",{className:V("header"),children:[(0,N.jsxs)("div",{className:V("desc"),children:[(0,N.jsx)(h.ZP,{interactive:!0,delay:[800,0],render:function(e){return(0,N.jsx)("div",(0,l.Z)((0,l.Z)({tabIndex:"-1"},e),{},{children:(0,N.jsx)(g.i,{children:(0,N.jsx)(j.Z,{data:t})})}))},placement:"bottom-start",offset:[-18,-4],children:(0,N.jsx)(x.Z,{className:V("avatar"),src:t.avatar,alt:"",size:"54px"})}),(0,N.jsxs)("div",{className:V("content"),children:[(0,N.jsxs)(_.rU,{to:"/",className:V("info"),children:[(0,N.jsx)("strong",{className:V("nickname"),children:t.nickname}),t.tick&&(0,N.jsx)(m.G,{icon:u.fV7,className:V("icon")}),(0,N.jsx)("p",{className:V("name"),children:t.first_name+t.last_name})]}),(0,N.jsxs)("p",{className:V("text"),children:[R,O.map((function(e,n){return(0,N.jsx)(f.Z,{className:V("hashtag"),children:e},n)}))]}),(0,N.jsxs)(_.rU,{to:"/",className:V("music"),children:[(0,N.jsx)(m.G,{icon:u.Xig,className:V("icon-music")}),(0,N.jsx)("p",{children:n.music})]})]})]}),(0,N.jsx)("div",{children:(0,N.jsx)(p.Z,{outline:!0,onClick:L?function(){}:F,children:"Follow"})})]}),(0,N.jsxs)("div",{className:V("main"),children:[(0,N.jsxs)("div",{className:V("place-video"),children:[(0,N.jsx)("video",{onTimeUpdate:function(e){e.target.volume=r},onClick:Q,ref:Z,className:V("video"),src:n.file_url,onEnded:function(e){e.target.currentTime=0,e.target.play()}}),(0,N.jsxs)("div",{className:V("action"),children:[(0,N.jsx)("button",{className:V("play-or-pause"),onClick:Q,children:E?(0,N.jsx)(m.G,{icon:u.XQY}):(0,N.jsx)(m.G,{icon:u.zc})}),(0,N.jsxs)("div",{className:V("volume"),children:[(0,N.jsx)("div",{className:V("volume-bar"),children:(0,N.jsx)("input",{type:"range",min:"0",max:"100",value:100*r,onChange:function(e){var n=e.target.value/100;d(n)}})}),(0,N.jsx)("button",{className:V("vol-icon"),onClick:function(){d(r>0?0:1)},children:r>0?(0,N.jsx)(m.G,{icon:u.AQZ}):(0,N.jsx)(m.G,{icon:u.c0k})})]})]})]}),(0,N.jsxs)("div",{className:V("place-interactive"),children:[(0,N.jsx)("button",{className:V("heart"),children:(0,N.jsx)(m.G,{icon:u.m6i})}),(0,N.jsx)("p",{className:V("quantity"),children:n.likes_count}),(0,N.jsx)("button",{className:V("comment"),children:(0,N.jsx)(m.G,{icon:u.Z6I})}),(0,N.jsx)("p",{className:V("quantity"),children:n.comments_count}),(0,N.jsx)(h.ZP,{interactive:!0,render:function(e){return(0,N.jsx)("div",(0,l.Z)((0,l.Z)({tabIndex:"-1"},e),{},{children:(0,N.jsx)(g.i,{children:(0,N.jsx)(k,{data:S})})}))},placement:"top-start",offset:[-20,4],delay:[0,400],children:(0,N.jsx)("button",{className:V("share"),children:(0,N.jsx)(m.G,{icon:u.zBy})})}),(0,N.jsx)("p",{className:V("quantity"),children:n.shares_count})]})]})]})},C=t(9417),E=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,s,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:1,t=a.length>1&&void 0!==a[1]?a[1]:"for-you",e.prev=2,e.next=5,C.U("videos",{params:{page:n,type:t}});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),U=r().bind({home:"Home_home__gGfTK"});function F(){var e=(0,v.useState)([]),n=(0,o.Z)(e,2),t=n[0],c=n[1],r=(0,v.useState)(1),l=(0,o.Z)(r,2),u=l[0],d=l[1],m=(0,v.useRef)(),_=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,a=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"for-you",window.removeEventListener("scroll",h),e.next=4,E(u,n);case 4:t=e.sent,console.log(u),c((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(t))})),window.addEventListener("scroll",h);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){return _("for-you"),window.addEventListener("scroll",h),window.removeEventListener("scroll",h)}),[u]);var h=function(){var e=m.current.scrollHeight;e>0&&document.documentElement.scrollTop>e-900&&d(u+1)};return(0,N.jsx)("div",{className:U("home"),ref:m,children:t.map((function(e,n){return(0,N.jsx)(G,{data:e},n)}))})}var L=(0,v.memo)(F)}}]);
//# sourceMappingURL=334.2f6759ed.chunk.js.map