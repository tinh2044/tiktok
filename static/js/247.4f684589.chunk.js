"use strict";(self.webpackChunktiktok=self.webpackChunktiktok||[]).push([[247],{4247:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(4165),c=t(2982),s=t(5861),a=t(885),r=t(9448),o=t.n(r),l=t(1413),d=t(1632),u=t(1187),m=t(4483),_=t(1087),h=t(2791),x=t(8858),p=(t(4992),t(5839)),v=t(9625),j=t(1519),f=t(5768),b=t(1663),g=t(3395),N=t(4307),V=t(184),I=o().bind({wrapper:"Share_wrapper__jtU6i",item:"Share_item__qERxI",icon:"Share_icon__VLEix",title:"Share_title__PRrOA",btn:"Share_btn__ccnmr"});var Z=function(e){var n=e.data,t=(0,h.useState)(n.slice(0,4)),i=(0,a.Z)(t,2),c=i[0],s=i[1],r=(0,h.useState)(!1),o=(0,a.Z)(r,2),l=o[0],u=o[1];return(0,V.jsxs)("div",{className:I("wrapper"),children:[c.map((function(e,n){return(0,V.jsxs)(_.rU,{className:I("item"),children:[(0,V.jsx)("div",{style:{backgroundColor:e.bgc},className:I("icon"),children:e.icon}),(0,V.jsx)("p",{className:I("title"),children:e.title})]},n)})),l?(0,V.jsx)("button",{className:I("btn"),onClick:function(){u(!1),s(n.slice(0,4))},children:(0,V.jsx)(m.G,{icon:d.mTx})}):(0,V.jsx)("button",{className:I("btn"),onClick:function(){u(!0),s(n)},children:(0,V.jsx)(m.G,{icon:d.ptq})})]})},k=t(5263),y=t(1313),w=o().bind({wrapper:"VideoItem_wrapper__SalTZ",header:"VideoItem_header__SUBWJ",desc:"VideoItem_desc__7bhcs",avatar:"VideoItem_avatar__9o5RU",content:"VideoItem_content__+hHVp",info:"VideoItem_info__7ZeOn",nickname:"VideoItem_nickname__jf8g7",icon:"VideoItem_icon__v9sA5",name:"VideoItem_name__9XAqA",text:"VideoItem_text__ruIx3",hashtag:"VideoItem_hashtag__Oloms",music:"VideoItem_music__N-ghC","icon-music":"VideoItem_icon-music__9eSql",main:"VideoItem_main__Ou-lo","place-video":"VideoItem_place-video__2aHot",video:"VideoItem_video__Y9-WQ",action:"VideoItem_action__Yd427","play-or-pause":"VideoItem_play-or-pause__lRTuS",volume:"VideoItem_volume__RQjU0","volume-bar":"VideoItem_volume-bar__orlnG","vol-icon":"VideoItem_vol-icon__Z7PqU","place-interactive":"VideoItem_place-interactive__QGMbe",heart:"VideoItem_heart__DH5m-",comment:"VideoItem_comment__sf8C9",share:"VideoItem_share__2FPy7",quantity:"VideoItem_quantity__79aIW"}),G=[{icon:(0,V.jsx)(m.G,{icon:d.dT$}),title:"Embed",bgc:"#161823"},{icon:(0,V.jsx)(m.G,{icon:d.M6U}),title:"Send to friends",bgc:"rgb(254, 44, 85)"},{icon:(0,V.jsx)(m.G,{icon:u.AYu}),title:"Share to facebook",bgc:"#20d5ec"},{icon:(0,V.jsx)(m.G,{icon:u.VHX}),title:"Share to whatsApp",bgc:"rgb(37, 211, 102)"},{icon:(0,V.jsx)(m.G,{icon:d.nNP}),title:"Copy link",bgc:"rgb(254, 44, 85)"},{icon:(0,V.jsx)(m.G,{icon:u.mdU}),title:"Share to twitter",bgc:"rgb(29, 161, 242)"},{icon:(0,V.jsx)(m.G,{icon:u.hwn}),title:"Share to linked",bgc:"rgb(10, 102, 194)"},{icon:(0,V.jsx)(m.G,{icon:u.Uv8}),title:"Share to Telegram",bgc:"rgb(29, 161, 242)"},{icon:(0,V.jsx)(m.G,{icon:d.FU$}),title:"Share to whatsApp",bgc:"rgb(29, 161, 242)"}];var S=function(e){var n=e.data,t=n.user,i=(0,h.useContext)(N.s),c=i.playVideo,s=i.setPlayVideo,r=(0,h.useContext)(g.i),o=r.volume,u=r.setVolume,I=(0,h.useRef)(null),S=(0,h.useState)(!1),C=(0,a.Z)(S,2),U=C[0],E=C[1],q=(0,h.useContext)(k.u).show,T=(0,h.useContext)(y.m).isLogin,A=(0,h.useState)(""),L=(0,a.Z)(A,2),P=L[0],R=L[1],H=(0,h.useState)([]),O=(0,a.Z)(H,2),Q=O[0],X=O[1];(0,h.useLayoutEffect)((function(){!function(){var e=n.description;e.includes("#")?(X(e.split("#").slice(1)),R(e.substring(0,e.indexOf("#")))):R(e)}()}),[]),(0,h.useMemo)((function(){c&&null!==I.current&&(c===n.id?I.current.play():(E(!1),I.current.pause(),I.current.currentTime=0))}),[c]);var Y=function(){return U?I.current.pause():(s(n.id),I.current.play()),E(!U)};return(0,V.jsxs)("div",{className:w("wrapper"),children:[(0,V.jsxs)("header",{className:w("header"),children:[(0,V.jsxs)("div",{className:w("desc"),children:[(0,V.jsx)(x.ZP,{interactive:!0,delay:[800,0],render:function(e){return(0,V.jsx)("div",(0,l.Z)((0,l.Z)({tabIndex:"-1"},e),{},{children:(0,V.jsx)(b.i,{children:(0,V.jsx)(f.Z,{data:t})})}))},placement:"bottom-start",offset:[-18,-4],children:(0,V.jsx)(p.Z,{className:w("avatar"),src:t.avatar,alt:"",size:"54px"})}),(0,V.jsxs)("div",{className:w("content"),children:[(0,V.jsxs)(_.rU,{to:"/",className:w("info"),children:[(0,V.jsx)("strong",{className:w("nickname"),children:t.nickname}),t.tick&&(0,V.jsx)(m.G,{icon:d.fV7,className:w("icon")}),(0,V.jsx)("p",{className:w("name"),children:t.first_name+t.last_name})]}),(0,V.jsxs)("p",{className:w("text"),children:[P,Q.map((function(e,n){return(0,V.jsx)(j.Z,{className:w("hashtag"),children:e},n)}))]}),(0,V.jsxs)(_.rU,{to:"/",className:w("music"),children:[(0,V.jsx)(m.G,{icon:d.Xig,className:w("icon-music")}),(0,V.jsx)("p",{children:n.music})]})]})]}),(0,V.jsx)("div",{children:(0,V.jsx)(v.Z,{outline:!0,onClick:T?function(){}:q,children:"Follow"})})]}),(0,V.jsxs)("div",{className:w("main"),children:[(0,V.jsxs)("div",{className:w("place-video"),children:[(0,V.jsx)("video",{onTimeUpdate:function(e){e.target.volume=o},onClick:Y,ref:I,className:w("video"),src:n.file_url,onEnded:function(e){e.target.currentTime=0,e.target.play()}}),(0,V.jsxs)("div",{className:w("action"),children:[(0,V.jsx)("button",{className:w("play-or-pause"),onClick:Y,children:U?(0,V.jsx)(m.G,{icon:d.XQY}):(0,V.jsx)(m.G,{icon:d.zc})}),(0,V.jsxs)("div",{className:w("volume"),children:[(0,V.jsx)("div",{className:w("volume-bar"),children:(0,V.jsx)("input",{type:"range",min:"0",max:"100",value:100*o,onChange:function(e){var n=e.target.value/100;u(n)}})}),(0,V.jsx)("button",{className:w("vol-icon"),onClick:function(){u(o>0?0:1)},children:o>0?(0,V.jsx)(m.G,{icon:d.AQZ}):(0,V.jsx)(m.G,{icon:d.c0k})})]})]})]}),(0,V.jsxs)("div",{className:w("place-interactive"),children:[(0,V.jsx)("button",{className:w("heart"),children:(0,V.jsx)(m.G,{icon:d.m6i})}),(0,V.jsx)("p",{className:w("quantity"),children:n.likes_count}),(0,V.jsx)("button",{className:w("comment"),children:(0,V.jsx)(m.G,{icon:d.Z6I})}),(0,V.jsx)("p",{className:w("quantity"),children:n.comments_count}),(0,V.jsx)(x.ZP,{interactive:!0,render:function(e){return(0,V.jsx)("div",(0,l.Z)((0,l.Z)({tabIndex:"-1"},e),{},{children:(0,V.jsx)(b.i,{children:(0,V.jsx)(Z,{data:G})})}))},placement:"top-start",offset:[-20,4],delay:[0,400],children:(0,V.jsx)("button",{className:w("share"),children:(0,V.jsx)(m.G,{icon:d.zBy})})}),(0,V.jsx)("p",{className:w("quantity"),children:n.shares_count})]})]})]})},C=t(9417),U=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,c,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:1,t=s.length>1&&void 0!==s[1]?s[1]:"for-you",e.prev=2,e.next=5,C.U("videos",{params:{page:n,type:t}});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),E=o().bind({home:"Home_home__gGfTK"});function q(){var e=(0,h.useState)([]),n=(0,a.Z)(e,2),t=n[0],r=n[1],o=(0,h.useState)(1),l=(0,a.Z)(o,2),d=l[0],u=l[1],m=(0,h.useRef)(),_=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,t,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:"for-you",window.removeEventListener("scroll",x),e.next=4,U(d,n);case 4:t=e.sent,console.log(d),r((function(e){return[].concat((0,c.Z)(e),(0,c.Z)(t))})),window.addEventListener("scroll",x);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){return _("for-you"),window.addEventListener("scroll",x),window.removeEventListener("scroll",x)}),[d]);var x=function(){var e=m.current.scrollHeight;e>0&&document.documentElement.scrollTop>e-900&&u(d+1)};return(0,V.jsx)("div",{className:E("home"),ref:m,children:t.map((function(e,n){return(0,V.jsx)(S,{data:e},n)}))})}var T=(0,h.memo)(q)}}]);
//# sourceMappingURL=247.4f684589.chunk.js.map